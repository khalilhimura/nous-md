<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Content Security Policy - Defense in depth against XSS -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https: http: data:; font-src 'self'; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'; form-action 'self';">
    <meta name="description" content="A minimalist markdown editor following Dieter Rams design principles">
    <title>NousMD - Markdown Editor</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">

        <!-- Header / Toolbar -->
        <header class="toolbar" role="toolbar" aria-label="Formatting toolbar">
            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-action="bold" aria-label="Bold" title="Bold (Ctrl+B)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 4h6a3 3 0 0 1 0 6H5V4zm0 6h7a3 3 0 0 1 0 6H5v-6z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                    </svg>
                </button>

                <button type="button" class="toolbar-btn" data-action="italic" aria-label="Italic" title="Italic (Ctrl+I)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 4h8M4 16h8M11 4l-4 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>

                <div class="toolbar-separator"></div>

                <button type="button" class="toolbar-btn" data-action="h1" aria-label="Heading 1" title="Heading 1 (Ctrl+1)">
                    <span class="btn-text">H1</span>
                </button>

                <button type="button" class="toolbar-btn" data-action="h2" aria-label="Heading 2" title="Heading 2 (Ctrl+2)">
                    <span class="btn-text">H2</span>
                </button>

                <button type="button" class="toolbar-btn" data-action="h3" aria-label="Heading 3" title="Heading 3 (Ctrl+3)">
                    <span class="btn-text">H3</span>
                </button>

                <div class="toolbar-separator"></div>

                <button type="button" class="toolbar-btn" data-action="link" aria-label="Insert Link" title="Link (Ctrl+K)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 11a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71M12 9a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>

                <button type="button" class="toolbar-btn" data-action="image" aria-label="Insert Image" title="Image (Ctrl+Shift+I)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="1.5"/>
                        <circle cx="7.5" cy="7.5" r="1.5" fill="currentColor"/>
                        <path d="M17 13l-4-4-6 6-2-2-2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <div class="toolbar-separator"></div>

                <button type="button" class="toolbar-btn" data-action="ul" aria-label="Unordered List" title="Unordered List (Ctrl+U)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="5" cy="5" r="1" fill="currentColor"/>
                        <circle cx="5" cy="10" r="1" fill="currentColor"/>
                        <circle cx="5" cy="15" r="1" fill="currentColor"/>
                        <path d="M9 5h8M9 10h8M9 15h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                </button>

                <button type="button" class="toolbar-btn" data-action="ol" aria-label="Ordered List" title="Ordered List (Ctrl+Shift+O)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 5h8M9 10h8M9 15h8M4 4v3M4 7h2M4 9v3l2 1M4 15v2h2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <button type="button" class="toolbar-btn" data-action="code" aria-label="Code Block" title="Code Block (Ctrl+Shift+C)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 7L3 10l3 3M14 7l3 3-3 3M11 4l-2 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <button type="button" class="toolbar-btn" data-action="quote" aria-label="Blockquote" title="Blockquote (Ctrl+Shift+Q)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 6h12M4 10h12M4 14h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        <path d="M6 6v8" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>

            <div class="toolbar-group">
                <button type="button" class="toolbar-btn" data-action="open" aria-label="Open File" title="Open File (Ctrl+O)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 7v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7M3 7V5a2 2 0 0 1 2-2h3l2 2h5a2 2 0 0 1 2 2v0" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                    </svg>
                </button>

                <button type="button" class="toolbar-btn" data-action="save" aria-label="Save File" title="Save File (Ctrl+S)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v7a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                        <path d="M13 3v4H7V3M7 17v-6h6v6" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                    </svg>
                </button>

                <div class="toolbar-separator"></div>

                <button type="button" class="toolbar-btn" data-action="clear" aria-label="Clear Editor" title="Clear (Ctrl+Shift+N)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6 4h8M8 4V3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1M4 7h12M5 7l1 9a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2l1-9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>

                <div class="toolbar-separator"></div>

                <button type="button" class="toolbar-btn" data-action="dark-mode" aria-label="Toggle Dark Mode" title="Toggle Dark Mode (Ctrl+D)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17 10.5A7 7 0 1 1 9.5 3a6 6 0 0 0 7.5 7.5z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Editor Pane -->
            <section class="editor-pane" aria-label="Markdown editor">
                <div class="editor-container">
                    <div id="editor-highlight" class="editor-highlight" aria-hidden="true"></div>
                    <textarea
                        id="editor"
                        class="editor-textarea"
                        placeholder="Start writing in markdown..."
                        spellcheck="true"
                        aria-label="Markdown editor"
                    ></textarea>
                </div>
            </section>

            <!-- Resizable Divider -->
            <div class="divider" role="separator" aria-label="Resize panels" tabindex="0"></div>

            <!-- Preview Pane -->
            <section class="preview-pane" aria-label="Preview">
                <div id="preview" class="preview-content"></div>
            </section>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-item">
                <span id="status-save" class="status-text">Saved</span>
            </div>
            <div class="status-item">
                <span id="status-words" class="status-text">0 words</span>
            </div>
        </footer>
    </div>

    <!-- Hidden file input for opening files -->
    <input type="file" id="file-input" accept=".md,.markdown,.txt" style="display: none;" aria-hidden="true">

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
